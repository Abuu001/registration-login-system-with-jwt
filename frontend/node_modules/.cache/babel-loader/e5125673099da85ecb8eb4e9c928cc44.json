{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"/media/lugonzo/New Volume/Web projects/node_js_backend/Registration Login With Jwt/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/media/lugonzo/New Volume/Web projects/node_js_backend/Registration Login With Jwt/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/lugonzo/New Volume/Web projects/node_js_backend/Registration Login With Jwt/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/media/lugonzo/New Volume/Web projects/node_js_backend/Registration Login With Jwt/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment,useState,useEffect}from'react';import'./App.css';import{BrowserRouter as Router,Switch,Route,Redirect}from\"react-router-dom\";import Login from'./components/Login__Registration/Login';import Registration from'./components/Login__Registration/Registration';import Dashboard from\"./components/Login__Registration/Dashboard/Dashboard\";import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';toast.configure();function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuthenticated=_useState2[0],setIsAuthenticated=_useState2[1];var isAuth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,parseRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:3002/auth/is-verify\",{method:\"GET\",headers:{token:localStorage.token}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:parseRes=_context.sent;parseRes===true?setIsAuthenticated(true):setIsAuthenticated(false);console.log(parseRes);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function isAuth(){return _ref.apply(this,arguments);};}();useEffect(function(){isAuth();},[]);var setAuth=function setAuth(boolean){setIsAuthenticated(boolean);};return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",render:function render(props){return!isAuthenticated?/*#__PURE__*/_jsx(Login,_objectSpread(_objectSpread({},props),{},{setAuth:setAuth})):/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",render:function render(props){return!isAuthenticated?/*#__PURE__*/_jsx(Registration,_objectSpread(_objectSpread({},props),{},{setAuth:setAuth})):/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/dashboard\",render:function render(props){return isAuthenticated?/*#__PURE__*/_jsx(Dashboard,_objectSpread(_objectSpread({},props),{},{setAuth:setAuth})):/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}})]})})})});}export default App;","map":{"version":3,"sources":["/media/lugonzo/New Volume/Web projects/node_js_backend/Registration Login With Jwt/frontend/src/App.js"],"names":["Fragment","useState","useEffect","BrowserRouter","Router","Switch","Route","Redirect","Login","Registration","Dashboard","toast","configure","App","isAuthenticated","setIsAuthenticated","isAuth","fetch","method","headers","token","localStorage","response","json","parseRes","console","log","message","setAuth","boolean","props"],"mappings":"45BAAA,OAASA,QAAT,CAAkBC,QAAlB,CAA4BC,SAA5B,KAA4C,OAA5C,CACA,MAAO,WAAP,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAmCC,MAAnC,CAA0CC,KAA1C,CAAgDC,QAAhD,KAA+D,kBAA/D,CACA,MAAOC,CAAAA,KAAP,KAAkB,wCAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,+CAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,sDAAtB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAO,uCAAP,CAEAA,KAAK,CAACC,SAAN,GAEA,QAASC,CAAAA,GAAT,EAAe,eAE8BZ,QAAQ,CAAC,KAAD,CAFtC,wCAENa,eAFM,eAEUC,kBAFV,eAIb,GAAMC,CAAAA,MAAM,0FAAC,+LAEcC,CAAAA,KAAK,CAAC,sCAAD,CAAwC,CAClEC,MAAM,CAAE,KAD0D,CAElEC,OAAO,CAAG,CAACC,KAAK,CAAGC,YAAY,CAACD,KAAtB,CAFwD,CAAxC,CAFnB,QAEHE,QAFG,qCAOcA,CAAAA,QAAQ,CAACC,IAAT,EAPd,QAOHC,QAPG,eAQTA,QAAQ,GAAM,IAAd,CAAwBT,kBAAkB,CAAC,IAAD,CAA1C,CAAmDA,kBAAkB,CAAC,KAAD,CAArE,CACAU,OAAO,CAACC,GAAR,CAAYF,QAAZ,EATS,iFAYTC,OAAO,CAACC,GAAR,CAAY,YAAMC,OAAlB,EAZS,qEAAD,kBAANX,CAAAA,MAAM,0CAAZ,CAgBAd,SAAS,CAAC,UAAI,CACZc,MAAM,GACP,CAFQ,CAEP,EAFO,CAAT,CAIA,GAAMY,CAAAA,OAAO,CAAE,QAATA,CAAAA,OAAS,CAACC,OAAD,CAAW,CACxBd,kBAAkB,CAACc,OAAD,CAAlB,CACD,CAFD,CAGA,mBACE,KAAC,QAAD,wBACE,KAAC,MAAD,wBACE,YAAK,SAAS,CAAC,WAAf,uBACE,MAAC,MAAD,yBACI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,QAAlB,CAA2B,MAAM,CAAE,gBAAAC,KAAK,QAAI,CAAChB,eAAD,cAAqB,KAAC,KAAD,gCAAYgB,KAAZ,MAAmB,OAAO,CAAEF,OAA5B,GAArB,cAAmE,KAAC,QAAD,EAAU,EAAE,CAAC,YAAb,EAAvE,EAAxC,EADJ,cAEI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,WAAlB,CAA8B,MAAM,CAAE,gBAAAE,KAAK,QAAI,CAAChB,eAAD,cAAqB,KAAC,YAAD,gCAAmBgB,KAAnB,MAA2B,OAAO,CAAEF,OAApC,GAArB,cAA0E,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAA9E,EAA3C,EAFJ,cAGI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,YAAlB,CAA+B,MAAM,CAAE,gBAAAE,KAAK,QAAIhB,CAAAA,eAAe,cAAI,KAAC,SAAD,gCAAgBgB,KAAhB,MAAuB,OAAO,CAAEF,OAAhC,GAAJ,cAAqD,KAAC,QAAD,EAAW,EAAE,CAAC,QAAd,EAAxE,EAA5C,EAHJ,GADF,EADF,EADF,EADF,CAcD,CAED,cAAef,CAAAA,GAAf","sourcesContent":["import { Fragment,useState ,useEffect} from 'react';\nimport './App.css';\nimport  {BrowserRouter as Router , Switch,Route,Redirect} from \"react-router-dom\"\nimport Login from './components/Login__Registration/Login';\nimport Registration from './components/Login__Registration/Registration';\nimport Dashboard from \"./components/Login__Registration/Dashboard/Dashboard\"\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\ntoast.configure();\n\nfunction App() {\n\n  const [isAuthenticated,setIsAuthenticated]=useState(false);\n\n  const isAuth=async ()=>{\n    try {\n      const response = await fetch(\"http://localhost:3002/auth/is-verify\",{\n        method :\"GET\",\n        headers : {token : localStorage.token}\n      })\n\n      const parseRes = await response.json()\n      parseRes ===  true  ?   setIsAuthenticated(true) : setIsAuthenticated(false)\n      console.log(parseRes);\n\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n\n  useEffect(()=>{\n    isAuth()\n  },[])\n\n  const setAuth =(boolean)=>{\n    setIsAuthenticated(boolean)\n  }\n  return (\n    <Fragment>\n      <Router>\n        <div className=\"container\">\n          <Switch>\n              <Route exact path=\"/login\" render={props => !isAuthenticated ?  (<Login  {...props} setAuth={setAuth} />)  :  (<Redirect to=\"/dashboard\"/>)  }/>\n              <Route exact path=\"/register\" render={props => !isAuthenticated ?  (<Registration  {...props}  setAuth={setAuth} />)  : (<Redirect to=\"/login\"/>)  }  />\n              <Route exact path=\"/dashboard\" render={props => isAuthenticated ?  <Dashboard  {...props} setAuth={setAuth} />  :  (<Redirect  to=\"/login\" />) }/>\n          </Switch>\n        </div>\n      </Router>\n  \n    </Fragment>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}